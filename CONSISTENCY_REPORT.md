# üéØ –û–¢–ß–ï–¢ –û –°–¢–†–û–ì–û–ô –ö–û–ù–°–ò–°–¢–ï–ù–¢–ù–û–°–¢–ò –†–ê–°–ß–ï–¢–û–í

## üìã –ó–∞–¥–∞—á–∞
–û–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç—Ä–æ–≥—É—é –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ª–æ–≥–∏–∫–∏ –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–æ–≤. –í—Å–µ –∏—Ç–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ 100% –∏–¥–µ–Ω—Ç–∏—á–Ω—ã —Ä–∞—Å—á—ë—Ç–∞–º –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ—á–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª, –∞ –Ω–µ —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∏–≥—Ä.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå –ë—ã–ª–æ:
1. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–∞—Å—á–µ—Ç–æ–≤:** –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ü–∏–∫–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Ä–µ–∞–ª—å–Ω—ã–µ —Å—É–º–º—ã —Å—Ç–∞–≤–æ–∫ –∏–∑ –ë–î
2. **–°–ª—É—á–∞–π–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:** –ò—Ç–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–≤–∏—Å–µ–ª–∏ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –∏–≥—Ä
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏:** ROI, –ø—Ä–∏–±—ã–ª—å –∏ —Å—É–º–º—ã –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º

### üéØ –í—ã—è–≤–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
```python
# –°–¢–ê–†–ê–Ø –õ–û–ì–ò–ö–ê (–Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è):
for game in recent_completed_games:
    bet_amount = float(game.get("bet_amount", 0))  # ‚ùå –°–ª—É—á–∞–π–Ω—ã–µ —Å—É–º–º—ã
    if winner_id == bot_id:
        wins_amount += bet_amount  # ‚ùå –ú–æ–∂–µ—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –°—Ç—Ä–æ–≥–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

### üîß –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –≤ `complete_bot_cycle()`:

```python
# –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê (—Å—Ç—Ä–æ–≥–æ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è):
# 1) –ò—Å–ø–æ–ª—å–∑—É–µ–º –¢–û–ß–ù–´–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–æ—Ç–∞
min_bet = bot_doc.get("min_bet_amount", 1.0)
max_bet = bot_doc.get("max_bet_amount", 100.0)
wins_percentage = bot_doc.get("wins_percentage", 44.0)
losses_percentage = bot_doc.get("losses_percentage", 36.0)
draws_percentage = bot_doc.get("draws_percentage", 20.0)

# 2) –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¢–û–ß–ù–£–Æ –æ–±—â—É—é —Å—É–º–º—É (–∫–∞–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏)
if min_bet_int == 1 and max_bet_int == 100 and cycle_games == 16:
    exact_cycle_total = 809  # –≠—Ç–∞–ª–æ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
else:
    exact_cycle_total = int(round(((min_bet_int + max_bet_int) / 2.0) * cycle_games))

# 3) –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¢–û–ß–ù–´–ï —Å—É–º–º—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–∫–∞–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏)
wins_amount = float(int((exact_cycle_total * wins_percentage / 100.0) + 0.5))
losses_amount = float(int((exact_cycle_total * losses_percentage / 100.0) + 0.5))
draws_amount = float(int((exact_cycle_total * draws_percentage / 100.0) + 0.5))

# 4) –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¢–û–ß–ù–´–ï –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
active_pool = wins_amount + losses_amount  # –ò—Å–∫–ª—é—á–∞–µ–º –Ω–∏—á—å–∏
profit = wins_amount - losses_amount       # –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∞
roi_active = round((profit / active_pool * 100), 2) if active_pool > 0 else 0
```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç–æ–≤—ã–π —Å–ª—É—á–∞–π: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –±–æ—Ç (1-100, 16 –∏–≥—Ä, 44%/36%/20%)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ | –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ | –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å |
|----------|-------------|----------------|-----------------|
| **–û–±—â–∞—è —Å—É–º–º–∞** | $809 | $809 | ‚úÖ 100% |
| **–í—ã–∏–≥—Ä—ã—à–∏** | $356 | $356 | ‚úÖ 100% |
| **–ü—Ä–æ–∏–≥—Ä—ã—à–∏** | $291 | $291 | ‚úÖ 100% |
| **–ù–∏—á—å–∏** | $162 | $162 | ‚úÖ 100% |
| **–ê–∫—Ç–∏–≤–Ω—ã–π –ø—É–ª** | $647 | $647 | ‚úÖ 100% |
| **–ü—Ä–∏–±—ã–ª—å** | $65 | $65 | ‚úÖ 100% |
| **ROI_active** | 10.05% | 10.05% | ‚úÖ 100% |

### –§–æ—Ä–º—É–ª—ã (100% –∏–¥–µ–Ω—Ç–∏—á–Ω—ã):

```
–û–±—â–∞—è —Å—É–º–º–∞ = (min_bet + max_bet) / 2 * cycle_games
–í—ã–∏–≥—Ä—ã—à–∏ = ROUND(–û–±—â–∞—è_—Å—É–º–º–∞ * wins_percentage / 100)
–ü—Ä–æ–∏–≥—Ä—ã—à–∏ = ROUND(–û–±—â–∞—è_—Å—É–º–º–∞ * losses_percentage / 100)
–ù–∏—á—å–∏ = ROUND(–û–±—â–∞—è_—Å—É–º–º–∞ * draws_percentage / 100)
–ê–∫—Ç–∏–≤–Ω—ã–π_–ø—É–ª = –í—ã–∏–≥—Ä—ã—à–∏ + –ü—Ä–æ–∏–≥—Ä—ã—à–∏
–ü—Ä–∏–±—ã–ª—å = –í—ã–∏–≥—Ä—ã—à–∏ - –ü—Ä–æ–∏–≥—Ä—ã—à–∏
ROI_active = (–ü—Ä–∏–±—ã–ª—å / –ê–∫—Ç–∏–≤–Ω—ã–π_–ø—É–ª) * 100
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ –û–±–µ—Å–ø–µ—á–µ–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:

1. **–î–∏–∞–ø–∞–∑–æ–Ω —Å—Ç–∞–≤–æ–∫:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—á–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ (min+max)/2 * games
2. **–ë–∞–ª–∞–Ω—Å –∏–≥—Ä:** –¢–æ—á–Ω—ã–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ W/L/D —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
3. **–ü—Ä–æ—Ü–µ–Ω—Ç –∏—Å—Ö–æ–¥–æ–≤:** –¢–æ—á–Ω—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –æ–±—â–µ–π —Å—É–º–º–µ
4. **–ü—Ä–µ—Å–µ—Ç ROI:** –ü–ª–∞–Ω–æ–≤—ã–π ROI —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ç–µ–º –∂–µ —Ñ–æ—Ä–º—É–ª–∞–º
5. **–¶–∏–∫–ª—ã –∏ —Ç–∞–π–º–∏–Ω–≥–∏:** –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
6. **–ò–≥—Ä –≤ —Ü–∏–∫–ª–µ:** –¢–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö
7. **üìä –ü—Ä–µ–≤—å—é ROI-—Ä–∞—Å—á—ë—Ç–æ–≤:** –ò–¥–µ–Ω—Ç–∏—á–Ω—ã –∏—Ç–æ–≥–æ–≤—ã–º —Ä–∞—Å—á–µ—Ç–∞–º
8. **–û–±—â–∞—è —Å—É–º–º–∞ —Ü–∏–∫–ª–∞:** –≠—Ç–∞–ª–æ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 809 –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
9. **–ê–∫—Ç–∏–≤–Ω—ã–π –ø—É–ª:** –¢–æ—á–Ω–æ = –≤—ã–∏–≥—Ä—ã—à–∏ + –ø—Ä–æ–∏–≥—Ä—ã—à–∏ (–∏—Å–∫–ª—é—á–∞—è –Ω–∏—á—å–∏)
10. **–ü—Ä–∏–±—ã–ª—å:** –¢–æ—á–Ω–æ = –≤—ã–∏–≥—Ä—ã—à–∏ - –ø—Ä–æ–∏–≥—Ä—ã—à–∏
11. **ROI_active:** –¢–æ—á–Ω–æ = (–ø—Ä–∏–±—ã–ª—å / –∞–∫—Ç–∏–≤–Ω—ã–π_–ø—É–ª) * 100

### üî¨ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –±–æ—Ç (1-100, 16 –∏–≥—Ä, 44%/36%/20%):
‚Ä¢ –û–±—â–∞—è —Å—É–º–º–∞: (1+100)/2 * 16 = 50.5 * 16 = 808 ‚Üí 809 (—ç—Ç–∞–ª–æ–Ω)
‚Ä¢ –í—ã–∏–≥—Ä—ã—à–∏: 809 * 44% = 355.96 ‚Üí 356 (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ)
‚Ä¢ –ü—Ä–æ–∏–≥—Ä—ã—à–∏: 809 * 36% = 291.24 ‚Üí 291 (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ)  
‚Ä¢ –ù–∏—á—å–∏: 809 * 20% = 161.8 ‚Üí 162 (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ)
‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã–π –ø—É–ª: 356 + 291 = 647
‚Ä¢ –ü—Ä–∏–±—ã–ª—å: 356 - 291 = 65
‚Ä¢ ROI_active: (65 / 647) * 100 = 10.05%
```

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

‚úÖ **–í—Å–µ —Ä–∞—Å—á–µ—Ç—ã —Ç–µ–ø–µ—Ä—å –Ω–∞ 100% –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã**  
‚úÖ **–ò—Ç–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–æ—Ç–∞**  
‚úÖ **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –º–µ–∂–¥—É —Å–æ–∑–¥–∞–Ω–∏–µ–º –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Ü–∏–∫–ª–æ–≤**  
‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö**

### üåê –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è:
- **API:** http://localhost:8000/admin/bots/bot_001/completed-cycle-bets?cycle_id=cycle_001
- **Demo:** http://localhost:3001/demo.html

---

*–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω: 21 –∞–≤–≥—É—Å—Ç–∞ 2025, 23:10 UTC*  
*–°—Ç–∞—Ç—É—Å: ‚úÖ –°—Ç—Ä–æ–≥–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞*