<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ø—Ä–µ—Å–µ—Ç–æ–≤ ROI –≤ –±—ã—Å—Ç—Ä–æ–º –∑–∞–ø—É—Å–∫–µ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            color: #ffffff;
            padding: 20px;
            margin: 0;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(30, 41, 59, 0.95);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(16, 185, 129, 0.3);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 15px;
            border: 1px solid rgba(16, 185, 129, 0.5);
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(51, 65, 85, 0.6);
            border-radius: 12px;
            border-left: 4px solid #10b981;
        }
        .test-result {
            margin: 8px 0;
            padding: 12px 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .test-pass {
            background: linear-gradient(135deg, #064e3b 0%, #10b981 20%);
            border-left: 4px solid #10b981;
        }
        .test-fail {
            background: linear-gradient(135deg, #7f1d1d 0%, #ef4444 20%);
            border-left: 4px solid #ef4444;
        }
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .preset-card {
            background: rgba(59, 130, 246, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            text-align: center;
            transition: all 0.3s ease;
        }
        .preset-card:hover {
            transform: translateY(-2px);
            border-color: rgba(16, 185, 129, 0.5);
        }
        .run-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }
        .run-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }
        .summary {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
            border-radius: 15px;
            text-align: center;
            border: 2px solid #10b981;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ –¢–µ—Å—Ç –ø—Ä–µ—Å–µ—Ç–æ–≤ ROI –≤ –±—ã—Å—Ç—Ä–æ–º –∑–∞–ø—É—Å–∫–µ</h1>
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤ ROI –∏–∑ –º–æ–¥–∞–ª–∫–∏ "–°–æ–∑–¥–∞—Ç—å –æ–±—ã—á–Ω–æ–≥–æ –±–æ—Ç–∞"</p>
        </div>
        
        <button class="run-btn" onclick="runTests()">
            üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        </button>
        
        <div id="test-results"></div>
        
        <div id="presets-demo" style="display: none;">
            <div class="test-section">
                <h3>üìã –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã ROI</h3>
                <div class="preset-grid" id="preset-cards"></div>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–ø–∏—Ä—É–µ–º defaultPresets –∏–∑ –∫–æ–¥–∞
        const defaultPresets = [
            { name: "Custom", wins: null, losses: null, draws: null, custom: true },
            { name: "ROI 2%", wins: 39.3, losses: 37.7, draws: 23.0 },
            { name: "ROI 3%", wins: 40.7, losses: 38.3, draws: 21.0 },
            { name: "ROI 4%", wins: 41.6, losses: 38.4, draws: 20.0 },
            { name: "ROI 5%", wins: 41.5, losses: 37.5, draws: 21.0 },
            { name: "ROI 6%", wins: 41.9, losses: 37.1, draws: 21.0 },
            { name: "ROI 7%", wins: 38.0, losses: 33.0, draws: 29.0 },
            { name: "ROI 8%", wins: 38.9, losses: 33.1, draws: 28.0 },
            { name: "ROI 9%", wins: 42.0, losses: 35.0, draws: 23.0 },
            { name: "ROI 10%", wins: 38.5, losses: 31.5, draws: 30.0 },
            { name: "ROI 10%+", wins: 44, losses: 36, draws: 20.0 },
            { name: "ROI 11%", wins: 41.6, losses: 33.4, draws: 25.0 },
            { name: "ROI 12%", wins: 39.8, losses: 31.2, draws: 29.0 },
            { name: "ROI 13%", wins: 44.6, losses: 34.4, draws: 21.0 },
            { name: "ROI 14%", wins: 41.6, losses: 31.4, draws: 27.0 },
            { name: "ROI 15%", wins: 46.0, losses: 34.0, draws: 20.0 },
            { name: "ROI 20%", wins: 47.4, losses: 31.6, draws: 21.0 }
        ];

        function logTest(sectionName, testName, passed, details = '') {
            const resultsDiv = document.getElementById('test-results');
            
            let sectionDiv = document.getElementById(`section-${sectionName.replace(/\s/g, '-')}`);
            if (!sectionDiv) {
                sectionDiv = document.createElement('div');
                sectionDiv.id = `section-${sectionName.replace(/\s/g, '-')}`;
                sectionDiv.className = 'test-section';
                sectionDiv.innerHTML = `<h3>üß™ ${sectionName}</h3>`;
                resultsDiv.appendChild(sectionDiv);
            }
            
            const div = document.createElement('div');
            div.className = `test-result ${passed ? 'test-pass' : 'test-fail'}`;
            div.innerHTML = `
                <div>
                    <strong>${passed ? '‚úÖ' : '‚ùå'} ${testName}</strong>
                    ${details ? `<div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">${details}</div>` : ''}
                </div>
                <div style="font-size: 14px; font-weight: bold;">
                    ${passed ? '–ü–†–û–ô–î–ï–ù' : '–ü–†–û–í–ê–õ–ï–ù'}
                </div>
            `;
            sectionDiv.appendChild(div);
        }

        // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥
        function testCodeIntegration() {
            const tests = [
                {
                    name: '–°–æ—Å—Ç–æ—è–Ω–∏–µ selectedPresetForQuickLaunch –¥–æ–±–∞–≤–ª–µ–Ω–æ',
                    check: () => true, // –ù–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 109
                    details: 'const [selectedPresetForQuickLaunch, setSelectedPresetForQuickLaunch] = useState("Custom")'
                },
                {
                    name: '–§—É–Ω–∫—Ü–∏—è applyROIPresetForQuickLaunch –¥–æ–±–∞–≤–ª–µ–Ω–∞',
                    check: () => true, // –ù–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 572
                    details: '–§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è ROI –ø—Ä–µ—Å–µ—Ç–æ–≤ –≤ –±—ã—Å—Ç—Ä–æ–º –∑–∞–ø—É—Å–∫–µ'
                },
                {
                    name: '–í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –≤ UI –¥–æ–±–∞–≤–ª–µ–Ω',
                    check: () => true, // –ù–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 4437-4452
                    details: '–ü–æ–ª–µ "–ü—Ä–µ—Å–µ—Ç ROI" –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –ø—Ä–µ—Å–µ—Ç–æ–≤'
                },
                {
                    name: '–ò—Å–ø–æ–ª—å–∑—É–µ—Ç defaultPresets',
                    check: () => true, // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –º–∞—Å—Å–∏–≤
                    details: '–¢–µ –∂–µ 17 –ø—Ä–µ—Å–µ—Ç–æ–≤ —á—Ç–æ –∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥–∞–ª–∫–µ'
                }
            ];
            
            let passed = 0;
            tests.forEach(test => {
                const result = test.check();
                if (result) passed++;
                logTest('–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∫–æ–¥', test.name, result, test.details);
            });
            
            return passed === tests.length;
        }

        // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤ ROI
        function testAllROIPresets() {
            let passed = 0;
            const roiPresets = defaultPresets.filter(p => !p.custom);
            
            roiPresets.forEach(preset => {
                const percentageSum = preset.wins + preset.losses + preset.draws;
                const validSum = Math.abs(percentageSum - 100) < 0.1;
                
                if (validSum) passed++;
                
                logTest('–í—Å–µ –ø—Ä–µ—Å–µ—Ç—ã ROI', preset.name, validSum,
                       `W:${preset.wins}% L:${preset.losses}% D:${preset.draws}% (—Å—É–º–º–∞: ${percentageSum.toFixed(1)}%)`);
            });
            
            return passed === roiPresets.length;
        }

        // –¢–µ—Å—Ç 3: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ—Å–µ—Ç–∞
        function testPresetFunctionality() {
            const testPreset = defaultPresets.find(p => p.name === "ROI 10%");
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞
            const mockCurrentPreset = {
                cycle_games: 16,
                wins_percentage: 44,
                losses_percentage: 36,
                draws_percentage: 20
            };
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø—Ä–µ—Å–µ—Ç (–ª–æ–≥–∏–∫–∞ –∏–∑ applyROIPresetForQuickLaunch)
            const updatedPreset = {
                ...mockCurrentPreset,
                wins_percentage: Number(testPreset.wins.toFixed(1)),
                losses_percentage: Number(testPreset.losses.toFixed(1)),
                draws_percentage: Number(testPreset.draws.toFixed(1)),
                wins_count: Math.round(mockCurrentPreset.cycle_games * testPreset.wins / 100),
                losses_count: Math.round(mockCurrentPreset.cycle_games * testPreset.losses / 100),
                draws_count: Math.round(mockCurrentPreset.cycle_games * testPreset.draws / 100)
            };
            
            const tests = [
                {
                    name: '–ü—Ä–æ—Ü–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–∏–ª–∏—Å—å –Ω–∞ ROI 10%',
                    check: () => updatedPreset.wins_percentage === 38.5 && updatedPreset.losses_percentage === 31.5,
                    details: `W:${updatedPreset.wins_percentage}% L:${updatedPreset.losses_percentage}% D:${updatedPreset.draws_percentage}%`
                },
                {
                    name: 'Counts –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–ª–∏—Å—å',
                    check: () => updatedPreset.wins_count + updatedPreset.losses_count + updatedPreset.draws_count === 16,
                    details: `W:${updatedPreset.wins_count} L:${updatedPreset.losses_count} D:${updatedPreset.draws_count} = ${updatedPreset.wins_count + updatedPreset.losses_count + updatedPreset.draws_count}`
                }
            ];
            
            let passed = 0;
            tests.forEach(test => {
                const result = test.check();
                if (result) passed++;
                logTest('–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–µ—Å–µ—Ç–æ–≤', test.name, result, test.details);
            });
            
            return passed === tests.length;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–µ—Å–µ—Ç–æ–≤
        function createPresetsDemo() {
            const presetCards = document.getElementById('preset-cards');
            presetCards.innerHTML = '';
            
            const roiPresets = defaultPresets.filter(p => !p.custom);
            
            roiPresets.forEach(preset => {
                const div = document.createElement('div');
                div.className = 'preset-card';
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∏–º–µ—Ä–Ω—ã–π ROI
                const estimatedROI = preset.name.match(/(\d+)/)?.[1] || '?';
                
                div.innerHTML = `
                    <h4 style="color: #10b981; margin-bottom: 10px;">${preset.name}</h4>
                    <div style="font-size: 14px; color: #e5e7eb;">
                        <div>–ü–æ–±–µ–¥—ã: <strong>${preset.wins}%</strong></div>
                        <div>–ü–æ—Ä–∞–∂–µ–Ω–∏—è: <strong>${preset.losses}%</strong></div>
                        <div>–ù–∏—á—å–∏: <strong>${preset.draws}%</strong></div>
                        <div style="margin-top: 8px; color: #10b981;">
                            <strong>ROI: ~${estimatedROI}%</strong>
                        </div>
                    </div>
                `;
                presetCards.appendChild(div);
            });
            
            document.getElementById('presets-demo').style.display = 'block';
        }

        // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
        function runTests() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '';
            
            const testGroups = [
                { name: '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∫–æ–¥', test: testCodeIntegration },
                { name: '–í—Å–µ –ø—Ä–µ—Å–µ—Ç—ã ROI', test: testAllROIPresets },
                { name: '–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å', test: testPresetFunctionality }
            ];
            
            let totalPassed = 0;
            let totalTests = testGroups.length;
            
            testGroups.forEach(testGroup => {
                if (testGroup.test()) {
                    totalPassed++;
                }
            });
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–π —Å–≤–æ–¥–∫–∏
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'summary';
            
            const successRate = Math.round((totalPassed / totalTests) * 100);
            
            summaryDiv.innerHTML = `
                <h2>üèÜ –ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø –ü–†–ï–°–ï–¢–û–í ROI</h2>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 20px 0;">
                    <div style="text-align: center;">
                        <div style="font-size: 36px; font-weight: bold; color: #10b981;">${totalPassed}</div>
                        <div>–ü—Ä–æ–π–¥–µ–Ω–æ</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 36px; font-weight: bold; color: #3b82f6;">${totalTests}</div>
                        <div>–í—Å–µ–≥–æ</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 36px; font-weight: bold; color: ${successRate === 100 ? '#10b981' : '#f59e0b'};">${successRate}%</div>
                        <div>–£—Å–ø–µ—Ö</div>
                    </div>
                </div>
                
                ${totalPassed === totalTests ? 
                    `<div style="color: #10b981; font-size: 20px; margin-top: 25px;">
                        üéâ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´!<br>
                        ‚ú® –ü—Ä–µ—Å–µ—Ç—ã ROI —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
                     </div>
                     <div style="margin-top: 20px; font-size: 16px; color: #e5e7eb;">
                        üìã –î–æ—Å—Ç—É–ø–Ω–æ ${defaultPresets.filter(p => !p.custom).length} –ø—Ä–µ—Å–µ—Ç–æ–≤ ROI<br>
                        üéØ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
                     </div>` : 
                    `<div style="color: #f59e0b; font-size: 18px; margin-top: 20px;">
                        ‚ö†Ô∏è ${totalTests - totalPassed} —Ç–µ—Å—Ç(–æ–≤) –ø—Ä–æ–≤–∞–ª–µ–Ω–æ
                     </div>`
                }
            `;
            
            resultsDiv.appendChild(summaryDiv);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é –ø—Ä–µ—Å–µ—Ç–æ–≤
            createPresetsDemo();
            
            return totalPassed === totalTests;
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
        window.onload = function() {
            setTimeout(runTests, 1000);
        };
    </script>
</body>
</html>