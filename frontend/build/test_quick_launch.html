<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #2a2a2a;
            padding: 30px;
            border-radius: 10px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .test-pass {
            background-color: #1a4a1a;
            border-left: 5px solid #4CAF50;
        }
        .test-fail {
            background-color: #4a1a1a;
            border-left: 5px solid #f44336;
        }
        .test-summary {
            margin-top: 20px;
            padding: 20px;
            background-color: #333;
            border-radius: 10px;
            text-align: center;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        .preset-demo {
            background-color: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .color-demo {
            display: inline-block;
            padding: 5px 10px;
            margin: 5px;
            border-radius: 5px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–æ–≤</h1>
        <p>–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–æ–≤.</p>
        
        <button onclick="runAllTests()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>
        
        <div id="test-results"></div>
        
        <div id="demo-section" style="display: none;">
            <h2>üé® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ—Å–µ—Ç–æ–≤</h2>
            <div id="preset-demo"></div>
        </div>
    </div>

    <script>
        function logTest(message, passed) {
            const resultsDiv = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `test-result ${passed ? 'test-pass' : 'test-fail'}`;
            div.innerHTML = `${passed ? '‚úÖ' : '‚ùå'} ${message}`;
            resultsDiv.appendChild(div);
        }

        // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ—Å–µ—Ç–æ–≤ –≤ localStorage
        function testPresetStorage() {
            const testPreset = {
                id: '1234567890',
                name: '–¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–µ—Å–µ—Ç',
                buttonName: 'üß™ –¢–µ—Å—Ç',
                buttonColor: 'green',
                min_bet_amount: 5.0,
                max_bet_amount: 100.0,
                wins_percentage: 45.0,
                losses_percentage: 35.0,
                draws_percentage: 20.0,
                cycle_games: 20,
                pause_between_cycles: 10,
                pause_on_draw: 3
            };

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–µ—Å–µ—Ç
            const presets = [testPreset];
            localStorage.setItem('quickLaunchPresets', JSON.stringify(presets));
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ
            const loaded = JSON.parse(localStorage.getItem('quickLaunchPresets'));
            
            const passed = loaded && loaded.length === 1 && loaded[0].name === testPreset.name;
            logTest('–¢–µ—Å—Ç 1: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤', passed);
            return passed;
        }

        // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
        function testPercentageValidation() {
            const validPreset = { wins_percentage: 45, losses_percentage: 35, draws_percentage: 20 };
            const invalidPreset = { wins_percentage: 50, losses_percentage: 40, draws_percentage: 20 };
            
            const validTotal = validPreset.wins_percentage + validPreset.losses_percentage + validPreset.draws_percentage;
            const invalidTotal = invalidPreset.wins_percentage + invalidPreset.losses_percentage + invalidPreset.draws_percentage;
            
            const validCheck = Math.abs(validTotal - 100) < 0.1;
            const invalidCheck = Math.abs(invalidTotal - 100) > 0.1;
            
            const passed = validCheck && invalidCheck;
            logTest(`–¢–µ—Å—Ç 2: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ (${validTotal}% OK, ${invalidTotal}% FAIL)`, passed);
            return passed;
        }

        // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞
        function testBotDataGeneration() {
            const preset = {
                name: '–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π',
                min_bet_amount: 10,
                max_bet_amount: 200,
                wins_percentage: 40,
                losses_percentage: 35,
                draws_percentage: 25,
                cycle_games: 16,
                pause_between_cycles: 5,
                pause_on_draw: 2
            };
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –≤ –∫–æ–¥–µ
            const timestamp = Date.now();
            const botData = {
                name: `${preset.name}-${timestamp}`,
                min_bet_amount: preset.min_bet_amount,
                max_bet_amount: preset.max_bet_amount,
                wins_percentage: preset.wins_percentage,
                losses_percentage: preset.losses_percentage,
                draws_percentage: preset.draws_percentage,
                cycle_games: preset.cycle_games,
                pause_between_cycles: preset.pause_between_cycles,
                pause_on_draw: preset.pause_on_draw,
                wins_count: Math.round(preset.cycle_games * preset.wins_percentage / 100),
                losses_count: Math.round(preset.cycle_games * preset.losses_percentage / 100),
                draws_count: Math.round(preset.cycle_games * preset.draws_percentage / 100)
            };
            
            const totalGames = botData.wins_count + botData.losses_count + botData.draws_count;
            const passed = totalGames === 16;
            
            logTest(`–¢–µ—Å—Ç 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞ (W=${botData.wins_count}, L=${botData.losses_count}, D=${botData.draws_count}, Total=${totalGames})`, passed);
            return passed;
        }

        // –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–≤–µ—Ç–æ–≤—ã—Ö —Å—Ö–µ–º –∫–Ω–æ–ø–æ–∫
        function testButtonColors() {
            const colors = ['blue', 'green', 'red', 'yellow', 'purple', 'orange'];
            const expectedClasses = {
                'blue': 'bg-blue-600 hover:bg-blue-700 border-blue-500',
                'green': 'bg-green-600 hover:bg-green-700 border-green-500',
                'red': 'bg-red-600 hover:bg-red-700 border-red-500',
                'yellow': 'bg-yellow-600 hover:bg-yellow-700 border-yellow-500',
                'purple': 'bg-purple-600 hover:bg-purple-700 border-purple-500',
                'orange': 'bg-orange-600 hover:bg-orange-700 border-orange-500'
            };
            
            let allCorrect = true;
            colors.forEach(color => {
                const preset = { buttonColor: color };
                const className = preset.buttonColor === 'green' ? 'bg-green-600 hover:bg-green-700 border-green-500' :
                               preset.buttonColor === 'red' ? 'bg-red-600 hover:bg-red-700 border-red-500' :
                               preset.buttonColor === 'yellow' ? 'bg-yellow-600 hover:bg-yellow-700 border-yellow-500' :
                               preset.buttonColor === 'purple' ? 'bg-purple-600 hover:bg-purple-700 border-purple-500' :
                               preset.buttonColor === 'orange' ? 'bg-orange-600 hover:bg-orange-700 border-orange-500' :
                               'bg-blue-600 hover:bg-blue-700 border-blue-500';
                
                if (className !== expectedClasses[color]) {
                    allCorrect = false;
                }
            });
            
            logTest('–¢–µ—Å—Ç 4: –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã –∫–Ω–æ–ø–æ–∫ (6 —Ü–≤–µ—Ç–æ–≤)', allCorrect);
            return allCorrect;
        }

        // –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–µ—Å–µ—Ç–∞
        function testPresetStructure() {
            const preset = {
                id: Date.now().toString(),
                name: '–¢–µ—Å—Ç–æ–≤—ã–π',
                buttonName: 'üéØ –¢–µ—Å—Ç–æ–≤—ã–π',
                buttonColor: 'blue',
                min_bet_amount: 1.0,
                max_bet_amount: 50.0,
                wins_percentage: 44.0,
                losses_percentage: 36.0,
                draws_percentage: 20.0,
                cycle_games: 16,
                pause_between_cycles: 5,
                pause_on_draw: 5
            };

            const requiredFields = ['id', 'name', 'buttonName', 'buttonColor', 'min_bet_amount', 'max_bet_amount', 
                                   'wins_percentage', 'losses_percentage', 'draws_percentage', 'cycle_games', 
                                   'pause_between_cycles', 'pause_on_draw'];

            const hasAllFields = requiredFields.every(field => preset.hasOwnProperty(field));
            logTest(`–¢–µ—Å—Ç 5: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ—Å–µ—Ç–∞ (${requiredFields.length} –ø–æ–ª–µ–π)`, hasAllFields);
            return hasAllFields;
        }

        // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ—Å–µ—Ç–æ–≤
        function createPresetDemo() {
            const demoPresets = [
                { name: '–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π', buttonName: 'üõ°Ô∏è –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π', buttonColor: 'blue', wins: 35, losses: 35, draws: 30 },
                { name: '–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', buttonName: '‚öñÔ∏è –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', buttonColor: 'green', wins: 44, losses: 36, draws: 20 },
                { name: '–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π', buttonName: 'üî• –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π', buttonColor: 'red', wins: 50, losses: 30, draws: 20 },
                { name: '–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π', buttonName: 'üß™ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç', buttonColor: 'purple', wins: 40, losses: 40, draws: 20 },
                { name: '–ë—ã—Å—Ç—Ä—ã–π', buttonName: '‚ö° –ë—ã—Å—Ç—Ä—ã–π', buttonColor: 'yellow', wins: 45, losses: 35, draws: 20 },
                { name: '–°—Ç–∞–±–∏–ª—å–Ω—ã–π', buttonName: 'üéØ –°—Ç–∞–±–∏–ª—å–Ω—ã–π', buttonColor: 'orange', wins: 42, losses: 38, draws: 20 }
            ];

            const demoDiv = document.getElementById('preset-demo');
            demoDiv.innerHTML = '';

            demoPresets.forEach(preset => {
                const colorMap = {
                    'blue': '#3b82f6',
                    'green': '#10b981',
                    'red': '#ef4444',
                    'yellow': '#f59e0b',
                    'purple': '#8b5cf6',
                    'orange': '#f97316'
                };

                const div = document.createElement('div');
                div.className = 'preset-demo';
                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div class="color-demo" style="background-color: ${colorMap[preset.buttonColor]};">
                                ${preset.buttonName}
                            </div>
                        </div>
                        <div style="text-align: right; font-size: 12px; color: #ccc;">
                            W: ${preset.wins}% | L: ${preset.losses}% | D: ${preset.draws}%
                        </div>
                    </div>
                `;
                demoDiv.appendChild(div);
            });

            document.getElementById('demo-section').style.display = 'block';
        }

        // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
        function runAllTests() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h2>';
            
            const tests = [
                testPresetStorage,
                testPercentageValidation,
                testBotDataGeneration,
                testButtonColors,
                testPresetStructure
            ];
            
            let passed = 0;
            let total = tests.length;
            
            tests.forEach(test => {
                if (test()) {
                    passed++;
                }
            });
            
            // –°–æ–∑–¥–∞–µ–º —Å–≤–æ–¥–∫—É
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'test-summary';
            summaryDiv.innerHTML = `
                <h3>üìà –°–≤–æ–¥–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h3>
                <p><strong>–ü—Ä–æ–π–¥–µ–Ω–æ:</strong> ${passed}/${total}</p>
                <p><strong>–ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞:</strong> ${Math.round((passed/total) * 100)}%</p>
                ${passed === total ? 
                    '<p style="color: #4CAF50; font-size: 18px;">üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã! –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.</p>' : 
                    `<p style="color: #f44336; font-size: 18px;">‚ö†Ô∏è ${total - passed} —Ç–µ—Å—Ç(–æ–≤) –ø—Ä–æ–≤–∞–ª–µ–Ω–æ. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞.</p>`
                }
            `;
            resultsDiv.appendChild(summaryDiv);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é
            createPresetDemo();
            
            // –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
            setTimeout(() => {
                localStorage.removeItem('quickLaunchPresets');
            }, 1000);
            
            return passed === total;
        }
    </script>
</body>
</html>