<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–æ–≤</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #ffffff;
            padding: 20px;
            line-height: 1.6;
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(42, 42, 42, 0.9);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(51, 51, 51, 0.5);
            border-radius: 10px;
            border-left: 4px solid #3b82f6;
        }
        .test-result {
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .test-pass {
            background: linear-gradient(135deg, #1a4a1a 0%, #2d5a2d 100%);
            border-left: 5px solid #4CAF50;
        }
        .test-fail {
            background: linear-gradient(135deg, #4a1a1a 0%, #5a2d2d 100%);
            border-left: 5px solid #f44336;
        }
        .test-summary {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #333 0%, #444 100%);
            border-radius: 15px;
            text-align: center;
            border: 2px solid #4CAF50;
        }
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .preset-card {
            background: rgba(51, 51, 51, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .preset-card:hover {
            transform: translateY(-2px);
            border-color: rgba(59, 130, 246, 0.5);
        }
        .preset-button {
            width: 100%;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }
        .btn-blue { background: #3b82f6; color: white; }
        .btn-green { background: #10b981; color: white; }
        .btn-red { background: #ef4444; color: white; }
        .btn-yellow { background: #f59e0b; color: white; }
        .btn-purple { background: #8b5cf6; color: white; }
        .btn-orange { background: #f97316; color: white; }
        
        .btn-blue:hover { background: #2563eb; transform: scale(1.02); }
        .btn-green:hover { background: #059669; transform: scale(1.02); }
        .btn-red:hover { background: #dc2626; transform: scale(1.02); }
        .btn-yellow:hover { background: #d97706; transform: scale(1.02); }
        .btn-purple:hover { background: #7c3aed; transform: scale(1.02); }
        .btn-orange:hover { background: #ea580c; transform: scale(1.02); }
        
        .run-tests-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: block;
            margin: 20px auto;
        }
        .run-tests-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ –§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–æ–≤</h1>
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</p>
        </div>
        
        <button class="run-tests-btn" onclick="runAllTests()">
            üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        </button>
        
        <div id="test-results"></div>
        
        <div class="test-section">
            <h2>üé® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ—Å–µ—Ç–æ–≤ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏</h2>
            <div class="demo-grid" id="preset-demo"></div>
        </div>
    </div>

    <script>
        function logTest(message, passed, details = '') {
            const resultsDiv = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `test-result ${passed ? 'test-pass' : 'test-fail'}`;
            div.innerHTML = `
                <div>
                    <strong>${passed ? '‚úÖ' : '‚ùå'} ${message}</strong>
                    ${details ? `<div style="font-size: 12px; margin-top: 5px; opacity: 0.8;">${details}</div>` : ''}
                </div>
                <div style="font-size: 14px; font-weight: bold;">
                    ${passed ? '–ü–†–û–ô–î–ï–ù' : '–ü–†–û–í–ê–õ–ï–ù'}
                </div>
            `;
            resultsDiv.appendChild(div);
        }

        // –¢–µ—Å—Ç 1: –ò–º—è –±–æ—Ç–∞ –±–µ–∑ timestamp
        function testBotNameWithoutTimestamp() {
            const preset = { name: '–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –±–æ—Ç' };
            const botData = { name: preset.name }; // –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ timestamp
            
            const hasTimestamp = /\d{13}/.test(botData.name);
            const passed = !hasTimestamp && botData.name === '–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –±–æ—Ç';
            
            logTest('–ò–º—è –±–æ—Ç–∞ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ü–∏—Ñ—Ä', passed, 
                   `–ò–º—è: "${botData.name}" | Timestamp: ${hasTimestamp ? '–ï–°–¢–¨' : '–ù–ï–¢'}`);
            return passed;
        }

        // –¢–µ—Å—Ç 2: –†–∞—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞ –∏–≥—Ä
        function testGameBalanceCalculation() {
            const preset = {
                cycle_games: 16,
                wins_percentage: 44,
                losses_percentage: 36,
                draws_percentage: 20
            };
            
            const W = Math.round(preset.cycle_games * preset.wins_percentage / 100);
            const L = Math.round(preset.cycle_games * preset.losses_percentage / 100);
            const D = Math.round(preset.cycle_games * preset.draws_percentage / 100);
            const total = W + L + D;
            
            const passed = W === 7 && L === 6 && D === 3 && total === 16;
            
            logTest('–†–∞—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞ –∏–≥—Ä W/L/D', passed,
                   `W=${W}, L=${L}, D=${D}, Total=${total} (–æ–∂–∏–¥–∞–ª–æ—Å—å: 7/6/3/16)`);
            return passed;
        }

        // –¢–µ—Å—Ç 3: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
        function testPercentageValidation() {
            const validPreset = { wins_percentage: 44, losses_percentage: 36, draws_percentage: 20 };
            const invalidPreset = { wins_percentage: 50, losses_percentage: 40, draws_percentage: 20 };
            
            const validTotal = validPreset.wins_percentage + validPreset.losses_percentage + validPreset.draws_percentage;
            const invalidTotal = invalidPreset.wins_percentage + invalidPreset.losses_percentage + invalidPreset.draws_percentage;
            
            const validCheck = Math.abs(validTotal - 100) < 0.1;
            const invalidCheck = Math.abs(invalidTotal - 100) > 0.1;
            const passed = validCheck && invalidCheck;
            
            logTest('–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –∏—Å—Ö–æ–¥–æ–≤', passed,
                   `–í–∞–ª–∏–¥–Ω—ã–π: ${validTotal}% | –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π: ${invalidTotal}%`);
            return passed;
        }

        // –¢–µ—Å—Ç 4: –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã
        function testColorSchemes() {
            const colors = ['blue', 'green', 'red', 'yellow', 'purple', 'orange'];
            const passed = colors.length === 6;
            
            logTest('–¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã –∫–Ω–æ–ø–æ–∫', passed,
                   `–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è ${colors.length} —Ü–≤–µ—Ç–æ–≤: ${colors.join(', ')}`);
            return passed;
        }

        // –¢–µ—Å—Ç 5: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ—Å–µ—Ç–∞
        function testPresetStructure() {
            const preset = {
                id: Date.now().toString(),
                name: '–¢–µ—Å—Ç–æ–≤—ã–π',
                buttonName: 'üéØ –¢–µ—Å—Ç–æ–≤—ã–π',
                buttonColor: 'blue',
                min_bet_amount: 1.0,
                max_bet_amount: 50.0,
                wins_percentage: 44.0,
                losses_percentage: 36.0,
                draws_percentage: 20.0,
                cycle_games: 16,
                pause_between_cycles: 5,
                pause_on_draw: 5
            };

            const requiredFields = ['id', 'name', 'buttonName', 'buttonColor', 'min_bet_amount', 'max_bet_amount', 
                                   'wins_percentage', 'losses_percentage', 'draws_percentage', 'cycle_games', 
                                   'pause_between_cycles', 'pause_on_draw'];

            const hasAllFields = requiredFields.every(field => preset.hasOwnProperty(field));
            const passed = hasAllFields;
            
            logTest('–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ—Å–µ—Ç–∞', passed,
                   `–ü–æ–ª—è: ${requiredFields.length}/12 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö`);
            return passed;
        }

        // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ—Å–µ—Ç–æ–≤ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
        function createPresetDemo() {
            const demoPresets = [
                { 
                    name: '–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π', 
                    buttonName: 'üõ°Ô∏è –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π', 
                    buttonColor: 'blue', 
                    wins: 35, losses: 35, draws: 30,
                    cycle_games: 16,
                    min_bet: 1, max_bet: 25
                },
                { 
                    name: '–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', 
                    buttonName: '‚öñÔ∏è –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', 
                    buttonColor: 'green', 
                    wins: 44, losses: 36, draws: 20,
                    cycle_games: 16,
                    min_bet: 5, max_bet: 50
                },
                { 
                    name: '–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π', 
                    buttonName: 'üî• –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π', 
                    buttonColor: 'red', 
                    wins: 50, losses: 30, draws: 20,
                    cycle_games: 20,
                    min_bet: 10, max_bet: 100
                },
                { 
                    name: '–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π', 
                    buttonName: 'üß™ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç', 
                    buttonColor: 'purple', 
                    wins: 40, losses: 40, draws: 20,
                    cycle_games: 12,
                    min_bet: 3, max_bet: 75
                },
                { 
                    name: '–ë—ã—Å—Ç—Ä—ã–π', 
                    buttonName: '‚ö° –ë—ã—Å—Ç—Ä—ã–π', 
                    buttonColor: 'yellow', 
                    wins: 45, losses: 35, draws: 20,
                    cycle_games: 8,
                    min_bet: 15, max_bet: 200
                },
                { 
                    name: '–°—Ç–∞–±–∏–ª—å–Ω—ã–π', 
                    buttonName: 'üéØ –°—Ç–∞–±–∏–ª—å–Ω—ã–π', 
                    buttonColor: 'orange', 
                    wins: 42, losses: 38, draws: 20,
                    cycle_games: 24,
                    min_bet: 2, max_bet: 30
                }
            ];

            const demoDiv = document.getElementById('preset-demo');
            demoDiv.innerHTML = '';

            demoPresets.forEach(preset => {
                const W = Math.round(preset.cycle_games * preset.wins / 100);
                const L = Math.round(preset.cycle_games * preset.losses / 100);
                const D = Math.round(preset.cycle_games * preset.draws / 100);
                
                const div = document.createElement('div');
                div.className = 'preset-card';
                div.innerHTML = `
                    <button class="preset-button btn-${preset.buttonColor}">
                        ${preset.buttonName}
                    </button>
                    <div style="font-size: 12px; color: #ccc;">
                        <div><strong>–ò–º—è –±–æ—Ç–∞:</strong> "${preset.name}"</div>
                        <div><strong>–°—Ç–∞–≤–∫–∏:</strong> $${preset.min_bet} - $${preset.max_bet}</div>
                        <div><strong>–¶–∏–∫–ª:</strong> ${preset.cycle_games} –∏–≥—Ä</div>
                        <div><strong>–ü—Ä–æ—Ü–µ–Ω—Ç—ã:</strong> W:${preset.wins}% L:${preset.losses}% D:${preset.draws}%</div>
                        <div><strong>‚öñÔ∏è –ë–∞–ª–∞–Ω—Å:</strong> W/L/D: ${W}/${L}/${D}</div>
                    </div>
                `;
                demoDiv.appendChild(div);
            });
        }

        // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
        function runAllTests() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div class="test-section"><h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2></div>';
            
            const tests = [
                testBotNameWithoutTimestamp,
                testGameBalanceCalculation,
                testPercentageValidation,
                testColorSchemes,
                testPresetStructure
            ];
            
            let passed = 0;
            let total = tests.length;
            
            tests.forEach(test => {
                if (test()) {
                    passed++;
                }
            });
            
            // –°–æ–∑–¥–∞–µ–º —Å–≤–æ–¥–∫—É
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'test-summary';
            summaryDiv.innerHTML = `
                <h3>üéâ –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                <div style="font-size: 24px; margin: 20px 0;">
                    <strong>${passed}/${total}</strong> —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
                </div>
                <div style="font-size: 32px; margin: 20px 0;">
                    ${Math.round((passed/total) * 100)}%
                </div>
                ${passed === total ? 
                    `<div style="color: #4CAF50; font-size: 18px; margin-top: 20px;">
                        üéâ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´ –£–°–ü–ï–®–ù–û!<br>
                        ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
                     </div>` : 
                    `<div style="color: #f44336; font-size: 18px;">
                        ‚ö†Ô∏è ${total - passed} –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ(–π) —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏
                     </div>`
                }
            `;
            resultsDiv.appendChild(summaryDiv);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é
            createPresetDemo();
            
            return passed === total;
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            setTimeout(() => {
                runAllTests();
            }, 500);
        };
    </script>
</body>
</html>