{
  "test_summary": {
    "total_cycles": 2,
    "perfect_streak_achieved": 2,
    "total_individual_tests": 20,
    "timestamp": "2025-08-19T05:30:51.815998"
  },
  "test_results": [
    {
      "test_number": 1,
      "test_name": "Server file integrity",
      "passed": true,
      "details": "Файл server.py целостный",
      "analysis": {
        "exists": true,
        "size": 1075928,
        "lines": 25400,
        "functions": 372,
        "classes": 96,
        "imports": 34,
        "comments": 2886,
        "docstrings": 353
      },
      "timestamp": "2025-08-19T05:30:49.646150"
    },
    {
      "test_number": 1,
      "test_name": "Maintain function analysis",
      "passed": true,
      "details": "Функция полностью очищена от старого механизма",
      "analysis": {
        "total_lines": 181,
        "save_completed_cycle_mentions": 1,
        "real_save_calls": 0,
        "comment_mentions": 1,
        "fix_comments": 1,
        "db_operations": 9,
        "logger_calls": 18,
        "try_catch_blocks": 3
      },
      "timestamp": "2025-08-19T05:30:49.752702"
    },
    {
      "test_number": 1,
      "test_name": "Complete bot cycle analysis",
      "passed": true,
      "details": "Новый механизм работает корректно",
      "analysis": {
        "total_lines": 58,
        "save_calls": 1,
        "existence_checks": 2,
        "find_one_calls": 3,
        "if_not_existing": 1,
        "error_handling": 1,
        "logger_calls": 5
      },
      "timestamp": "2025-08-19T05:30:49.858366"
    },
    {
      "test_number": 1,
      "test_name": "Save cycle idempotency",
      "passed": true,
      "details": "Идемпотентность полностью реализована",
      "analysis": {
        "total_lines": 170,
        "existence_checks": 1,
        "early_returns": 1,
        "insert_operations": 1,
        "duplicate_error_handling": 2,
        "try_catch_blocks": 1,
        "logger_warnings": 3,
        "projection_usage": 1
      },
      "timestamp": "2025-08-19T05:30:49.963918"
    },
    {
      "test_number": 1,
      "test_name": "API endpoints comprehensive",
      "passed": true,
      "details": "Все критические API эндпоинты имеют фильтрацию",
      "analysis": {
        "total_endpoints_found": 5,
        "endpoints_with_filter": 5,
        "endpoints_without_filter": [],
        "filter_patterns_found": [
          "get_bot_cycle_history: \"id\": \\{\".*temp_cycle_.*\"\\}",
          "get_bot_cycles_history: \"id\": \\{\".*temp_cycle_.*\"\\}",
          "export_bot_cycles_csv: \"id\": \\{\".*temp_cycle_.*\"\\}",
          "get_bot_revenue_summary: \"id\": \\{\".*temp_cycle_.*\"\\}",
          "get_completed_cycle_bets: \"id\": \\{\".*temp_cycle_.*\"\\}"
        ],
        "temp_cycle_mentions": 7
      },
      "timestamp": "2025-08-19T05:30:50.073456"
    },
    {
      "test_number": 1,
      "test_name": "Frontend components deep",
      "passed": true,
      "details": "Все frontend компоненты имеют фильтрацию",
      "analysis": {
        "total_files_checked": 2,
        "files_with_filter": 2,
        "files_without_filter": [],
        "filter_patterns": [
          "BotCycleModal.js: !game\\.id\\.startsWith\\('temp_cycle_'\\)",
          "BotCycleModal.js: !game\\.id \\|\\| !game\\.id\\.startsWith\\(\\'temp_cycle_\\'\\)",
          "RegularBotsManagement.js: !cycle\\.id\\.startsWith\\('temp_cycle_'\\)",
          "RegularBotsManagement.js: !cycle\\.id \\|\\| !cycle\\.id\\.startsWith\\(\\'temp_cycle_\\'\\)"
        ],
        "component_analysis": {
          "BotCycleModal.js": {
            "exists": true,
            "size": 6845,
            "lines": 214,
            "temp_cycle_mentions": 1,
            "filter_patterns": [
              "!game\\.id\\.startsWith\\('temp_cycle_'\\)",
              "!game\\.id \\|\\| !game\\.id\\.startsWith\\(\\'temp_cycle_\\'\\)"
            ],
            "has_filter": true
          },
          "RegularBotsManagement.js": {
            "exists": true,
            "size": 237681,
            "lines": 4852,
            "temp_cycle_mentions": 1,
            "filter_patterns": [
              "!cycle\\.id\\.startsWith\\('temp_cycle_'\\)",
              "!cycle\\.id \\|\\| !cycle\\.id\\.startsWith\\(\\'temp_cycle_\\'\\)"
            ],
            "has_filter": true
          }
        }
      },
      "timestamp": "2025-08-19T05:30:50.175826"
    },
    {
      "test_number": 1,
      "test_name": "Temp cycle elimination",
      "passed": true,
      "details": "Генерация temp_cycle_ полностью устранена",
      "analysis": {
        "file_size": 1075928,
        "total_temp_mentions": 7,
        "creation_patterns": {
          "f_string_creation": 0,
          "string_concatenation": 0,
          "variable_assignment": 0,
          "uuid_generation": 0,
          "format_creation": 0
        },
        "demo_generation_patterns": {
          "demo_data_generation": 0,
          "demo_games_generation": 0,
          "demo_cycle_creation": 0,
          "fake_cycle_generation": 0
        },
        "api_generation_blocks": 0,
        "comment_mentions": 0,
        "protective_patterns": {
          "temp_cycle_protection": 1,
          "fake_cycle_rejection": 1
        }
      },
      "timestamp": "2025-08-19T05:30:50.294855"
    },
    {
      "test_number": 1,
      "test_name": "Cleanup scripts functionality",
      "passed": true,
      "details": "Все скрипты очистки функциональны",
      "analysis": {
        "total_scripts": 3,
        "scripts_found": 3,
        "scripts_analysis": {
          "cleanup_and_fix_cycles.py": {
            "exists": true,
            "size": 7134,
            "lines": 188,
            "functions_found": [
              "cleanup_and_fix_cycles",
              "main"
            ],
            "patterns_found": [
              "temp_cycle_",
              "delete_many",
              "aggregate"
            ],
            "missing_functions": [],
            "missing_patterns": []
          },
          "verify_cycles_integrity.py": {
            "exists": true,
            "size": 7674,
            "lines": 195,
            "functions_found": [
              "verify_cycles_integrity",
              "main"
            ],
            "patterns_found": [
              "completed_cycles",
              "count_documents",
              "fake_cycles"
            ],
            "missing_functions": [],
            "missing_patterns": []
          },
          "create_unique_index.py": {
            "exists": true,
            "size": 2579,
            "lines": 77,
            "functions_found": [
              "create_unique_index",
              "main"
            ],
            "patterns_found": [
              "create_index",
              "unique=True",
              "bot_id",
              "cycle_number"
            ],
            "missing_functions": [],
            "missing_patterns": []
          }
        }
      },
      "timestamp": "2025-08-19T05:30:50.395555"
    },
    {
      "test_number": 1,
      "test_name": "Error handling comprehensive",
      "passed": true,
      "details": "Обработка ошибок реализована комплексно",
      "analysis": {
        "functions_checked": 3,
        "functions_analysis": {
          "save_completed_cycle": {
            "found": true,
            "try_blocks": 2,
            "except_blocks": 2,
            "specific_exceptions": 2,
            "general_exceptions": 2,
            "error_logging": 5,
            "duplicate_error_handling": 2,
            "return_on_error": 1
          },
          "complete_bot_cycle": {
            "found": true,
            "try_blocks": 1,
            "except_blocks": 1,
            "specific_exceptions": 1,
            "general_exceptions": 1,
            "error_logging": 1,
            "duplicate_error_handling": 0,
            "return_on_error": 0
          },
          "maintain_all_bots_active_bets": {
            "found": true,
            "try_blocks": 3,
            "except_blocks": 3,
            "specific_exceptions": 2,
            "general_exceptions": 2,
            "error_logging": 5,
            "duplicate_error_handling": 0,
            "return_on_error": 0
          }
        }
      },
      "timestamp": "2025-08-19T05:30:50.501889"
    },
    {
      "test_number": 1,
      "test_name": "Code consistency",
      "passed": true,
      "details": "Код консистентен и хорошо структурирован",
      "analysis": {
        "total_lines": 25400,
        "async_functions": 318,
        "sync_functions": 19,
        "logger_calls": 644,
        "await_calls": 1224,
        "try_catch_ratio": 1.3072100313479624,
        "comment_density": 11.362204724409448,
        "docstring_coverage": 104.74777448071218,
        "consistent_naming": true,
        "fix_comments": 19
      },
      "timestamp": "2025-08-19T05:30:50.621628"
    },
    {
      "test_number": 2,
      "test_name": "Server file integrity",
      "passed": true,
      "details": "Файл server.py целостный",
      "analysis": {
        "exists": true,
        "size": 1075928,
        "lines": 25400,
        "functions": 372,
        "classes": 96,
        "imports": 34,
        "comments": 2886,
        "docstrings": 353
      },
      "timestamp": "2025-08-19T05:30:50.740404"
    },
    {
      "test_number": 2,
      "test_name": "Maintain function analysis",
      "passed": true,
      "details": "Функция полностью очищена от старого механизма",
      "analysis": {
        "total_lines": 181,
        "save_completed_cycle_mentions": 1,
        "real_save_calls": 0,
        "comment_mentions": 1,
        "fix_comments": 1,
        "db_operations": 9,
        "logger_calls": 18,
        "try_catch_blocks": 3
      },
      "timestamp": "2025-08-19T05:30:50.845387"
    },
    {
      "test_number": 2,
      "test_name": "Complete bot cycle analysis",
      "passed": true,
      "details": "Новый механизм работает корректно",
      "analysis": {
        "total_lines": 58,
        "save_calls": 1,
        "existence_checks": 2,
        "find_one_calls": 3,
        "if_not_existing": 1,
        "error_handling": 1,
        "logger_calls": 5
      },
      "timestamp": "2025-08-19T05:30:50.950616"
    },
    {
      "test_number": 2,
      "test_name": "Save cycle idempotency",
      "passed": true,
      "details": "Идемпотентность полностью реализована",
      "analysis": {
        "total_lines": 170,
        "existence_checks": 1,
        "early_returns": 1,
        "insert_operations": 1,
        "duplicate_error_handling": 2,
        "try_catch_blocks": 1,
        "logger_warnings": 3,
        "projection_usage": 1
      },
      "timestamp": "2025-08-19T05:30:51.055831"
    },
    {
      "test_number": 2,
      "test_name": "API endpoints comprehensive",
      "passed": true,
      "details": "Все критические API эндпоинты имеют фильтрацию",
      "analysis": {
        "total_endpoints_found": 5,
        "endpoints_with_filter": 5,
        "endpoints_without_filter": [],
        "filter_patterns_found": [
          "get_bot_cycle_history: \"id\": \\{\".*temp_cycle_.*\"\\}",
          "get_bot_cycles_history: \"id\": \\{\".*temp_cycle_.*\"\\}",
          "export_bot_cycles_csv: \"id\": \\{\".*temp_cycle_.*\"\\}",
          "get_bot_revenue_summary: \"id\": \\{\".*temp_cycle_.*\"\\}",
          "get_completed_cycle_bets: \"id\": \\{\".*temp_cycle_.*\"\\}"
        ],
        "temp_cycle_mentions": 7
      },
      "timestamp": "2025-08-19T05:30:51.164826"
    },
    {
      "test_number": 2,
      "test_name": "Frontend components deep",
      "passed": true,
      "details": "Все frontend компоненты имеют фильтрацию",
      "analysis": {
        "total_files_checked": 2,
        "files_with_filter": 2,
        "files_without_filter": [],
        "filter_patterns": [
          "BotCycleModal.js: !game\\.id\\.startsWith\\('temp_cycle_'\\)",
          "BotCycleModal.js: !game\\.id \\|\\| !game\\.id\\.startsWith\\(\\'temp_cycle_\\'\\)",
          "RegularBotsManagement.js: !cycle\\.id\\.startsWith\\('temp_cycle_'\\)",
          "RegularBotsManagement.js: !cycle\\.id \\|\\| !cycle\\.id\\.startsWith\\(\\'temp_cycle_\\'\\)"
        ],
        "component_analysis": {
          "BotCycleModal.js": {
            "exists": true,
            "size": 6845,
            "lines": 214,
            "temp_cycle_mentions": 1,
            "filter_patterns": [
              "!game\\.id\\.startsWith\\('temp_cycle_'\\)",
              "!game\\.id \\|\\| !game\\.id\\.startsWith\\(\\'temp_cycle_\\'\\)"
            ],
            "has_filter": true
          },
          "RegularBotsManagement.js": {
            "exists": true,
            "size": 237681,
            "lines": 4852,
            "temp_cycle_mentions": 1,
            "filter_patterns": [
              "!cycle\\.id\\.startsWith\\('temp_cycle_'\\)",
              "!cycle\\.id \\|\\| !cycle\\.id\\.startsWith\\(\\'temp_cycle_\\'\\)"
            ],
            "has_filter": true
          }
        }
      },
      "timestamp": "2025-08-19T05:30:51.267030"
    },
    {
      "test_number": 2,
      "test_name": "Temp cycle elimination",
      "passed": true,
      "details": "Генерация temp_cycle_ полностью устранена",
      "analysis": {
        "file_size": 1075928,
        "total_temp_mentions": 7,
        "creation_patterns": {
          "f_string_creation": 0,
          "string_concatenation": 0,
          "variable_assignment": 0,
          "uuid_generation": 0,
          "format_creation": 0
        },
        "demo_generation_patterns": {
          "demo_data_generation": 0,
          "demo_games_generation": 0,
          "demo_cycle_creation": 0,
          "fake_cycle_generation": 0
        },
        "api_generation_blocks": 0,
        "comment_mentions": 0,
        "protective_patterns": {
          "temp_cycle_protection": 1,
          "fake_cycle_rejection": 1
        }
      },
      "timestamp": "2025-08-19T05:30:51.385483"
    },
    {
      "test_number": 2,
      "test_name": "Cleanup scripts functionality",
      "passed": true,
      "details": "Все скрипты очистки функциональны",
      "analysis": {
        "total_scripts": 3,
        "scripts_found": 3,
        "scripts_analysis": {
          "cleanup_and_fix_cycles.py": {
            "exists": true,
            "size": 7134,
            "lines": 188,
            "functions_found": [
              "cleanup_and_fix_cycles",
              "main"
            ],
            "patterns_found": [
              "temp_cycle_",
              "delete_many",
              "aggregate"
            ],
            "missing_functions": [],
            "missing_patterns": []
          },
          "verify_cycles_integrity.py": {
            "exists": true,
            "size": 7674,
            "lines": 195,
            "functions_found": [
              "verify_cycles_integrity",
              "main"
            ],
            "patterns_found": [
              "completed_cycles",
              "count_documents",
              "fake_cycles"
            ],
            "missing_functions": [],
            "missing_patterns": []
          },
          "create_unique_index.py": {
            "exists": true,
            "size": 2579,
            "lines": 77,
            "functions_found": [
              "create_unique_index",
              "main"
            ],
            "patterns_found": [
              "create_index",
              "unique=True",
              "bot_id",
              "cycle_number"
            ],
            "missing_functions": [],
            "missing_patterns": []
          }
        }
      },
      "timestamp": "2025-08-19T05:30:51.486140"
    },
    {
      "test_number": 2,
      "test_name": "Error handling comprehensive",
      "passed": true,
      "details": "Обработка ошибок реализована комплексно",
      "analysis": {
        "functions_checked": 3,
        "functions_analysis": {
          "save_completed_cycle": {
            "found": true,
            "try_blocks": 2,
            "except_blocks": 2,
            "specific_exceptions": 2,
            "general_exceptions": 2,
            "error_logging": 5,
            "duplicate_error_handling": 2,
            "return_on_error": 1
          },
          "complete_bot_cycle": {
            "found": true,
            "try_blocks": 1,
            "except_blocks": 1,
            "specific_exceptions": 1,
            "general_exceptions": 1,
            "error_logging": 1,
            "duplicate_error_handling": 0,
            "return_on_error": 0
          },
          "maintain_all_bots_active_bets": {
            "found": true,
            "try_blocks": 3,
            "except_blocks": 3,
            "specific_exceptions": 2,
            "general_exceptions": 2,
            "error_logging": 5,
            "duplicate_error_handling": 0,
            "return_on_error": 0
          }
        }
      },
      "timestamp": "2025-08-19T05:30:51.593970"
    },
    {
      "test_number": 2,
      "test_name": "Code consistency",
      "passed": true,
      "details": "Код консистентен и хорошо структурирован",
      "analysis": {
        "total_lines": 25400,
        "async_functions": 318,
        "sync_functions": 19,
        "logger_calls": 644,
        "await_calls": 1224,
        "try_catch_ratio": 1.3072100313479624,
        "comment_density": 11.362204724409448,
        "docstring_coverage": 104.74777448071218,
        "consistent_naming": true,
        "fix_comments": 19
      },
      "timestamp": "2025-08-19T05:30:51.715165"
    }
  ],
  "detailed_analysis": {}
}